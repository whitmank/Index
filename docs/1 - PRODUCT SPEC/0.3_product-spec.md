# Index v0.3 - Product Specification

> Product-level specification documenting design, user interaction, and feature requirements.
> This document focuses on what users see and do, not technical implementation.

---

## 1. Product Overview

**Product Name:** Index

**Type:** Desktop personal information indexing and visualization system

**Problem Statement:** Users struggle to organize and connect disparate information across their devices. File systems enforce rigid hierarchies, bookmarks get lost in folders, and personal knowledge remains fragmented across multiple tools. Index bridges this gap by creating a flexible, unified layer for organizing any type of information.

**Solution:** A local-first desktop application that creates a semantic layer above various information sources (files, URLs, etc.) with flexible tagging, smart collections, and interactive graph visualization.

**Target Platform:** Cross-platform desktop (macOS, Windows, Linux) via Electron

---

## 2. Core Concept: Objects and Sources

### 2.1 The Object Model

Instead of thinking about "files," Index works with **Objects** - containers of information that reference their source:

```
Object (in Index)
├── Name: "Quarterly Report Q4"
├── Source: file:///Users/karter/documents/report.pdf
├── Tags: ["quarterly", "important", "finance"]
├── Notes: "Key insights on revenue trends"
└── Links: [references → "Market Analysis", cited by → "Board Slides"]
```

An object can point to:
- **Files** on your computer (`file:///path/to/document.pdf`)
- **Web pages** (`https://example.com/article`)
- **Future sources** (Notion pages, email, recordings, etc.)

This abstraction means all Index features (tagging, collections, relationships) work the same way regardless of what you're organizing.

### 2.2 Key Principles

**Local-First:** All data stays on your device. No cloud required, no tracking.

**Source-Agnostic:** Organize anything with a URI. Today: files and URLs. Tomorrow: any information source.

**Non-Destructive:** Index never modifies your original files or sources. It's purely an organizational layer.

**Flexible Relationships:** Connect objects however you want - as tags, in collections, or through explicit links.

---

## 3. Features

### 3.1 Import and Management

**Add Objects:**
1. Click "Add Files" → Select files or folders from your computer
2. Click "Add URL" → Enter or paste a web address
3. Paste Detection → Automatically detects file paths or URLs in clipboard

**Import Workflow:**
1. User imports files/URLs
2. Index extracts metadata:
   - File: name, size, type, modification date
   - URL: page title, description, favicon
3. Optional: User assigns initial tags or collection
4. Objects appear in library immediately

**Deduplication:**
- Files: Detected by content hash (SHA-256)
- URLs: Detected by comparing cached content
- User is notified if duplicate is found; can skip or re-import

**Metadata Display:**
- File objects show: name, size, type, last modified, path
- URL objects show: title, description, favicon, domain
- All objects show: number of tags, last indexed date

### 3.2 Tagging System

**Tag Management:**

- **Add/Remove Tags:** Click in detail panel to add tags to selected objects
- **Tag Autocomplete:** Start typing to see existing tags; or create new ones
- **Rename Tags:** Rename a tag globally - all objects with that tag are automatically updated
- **Tag Properties:** Each tag can have a color and description

**Tag Workflows:**
1. Add tags while importing objects
2. Add tags to existing objects via detail panel
3. Bulk tag: Select multiple objects, apply tags at once
4. Search by tag: Click any tag to filter objects

**Tag Views:**
- "Tags" page shows all tags with file counts
- Click a tag to see all objects with that tag
- Tag badges appear in object lists with colors

### 3.3 Collections (Smart Folders)

**Concept:** Collections are dynamic groups of objects based on tag queries.

**Create a Collection:**
1. Name your collection (e.g., "Active Projects")
2. Define query rules:
   - **Must have ALL** these tags (AND) - e.g., "active" AND "project"
   - **Must have ANY** of these tags (OR) - e.g., "urgent" OR "review"
   - **Must NOT have** these tags (NOT) - e.g., NOT "archived"
3. Optionally assign a color
4. Collections update automatically as objects are tagged

**Example Queries:**
```
Collection: "Urgent Project Work"
Must have ALL: ["project", "active"]
Must have ANY: ["urgent", "review"]
Must NOT have: ["completed"]
→ Shows: Active project files that are either urgent OR need review, excluding completed ones
```

**Collection UI:**
- Pin collections to sidebar for quick access
- Collections show object count
- Click collection to view members
- Collections page lists all available collections
- Can unpin or delete collections

### 3.4 Object Relationships

**Create Connections:**

Objects can be linked to show relationships:
- "Report references Market Analysis"
- "Presentation derived from Proposal"
- "Code implements Feature Spec"

**Link Types:**
- **Related** - General connection between objects
- **Derivative** - One object is derived from another
- **Reference** - One object references another

**Link Direction:**
- Links can be one-way (A → B) or bidirectional (A ↔ B)
- Bidirectional links visible from both objects

**Graph View:**
- Visual representation of all objects and their connections
- Click and drag to rearrange layout
- Zoom and pan to explore
- Hover over links to see relationship type
- Click objects to select and view details

### 3.5 File Browsing

**Views:**

1. **All Objects** - Complete indexed library, sortable by name, type, date modified
2. **Tags** - Objects grouped by their tags
3. **Collections** - List of all collections with object counts
4. **Collection Detail** - Objects within a specific collection
5. **Graph** - Interactive network visualization
6. **Search** - (Future) Find objects by content

**Interaction in Lists:**
- **Single Click:** Select one object
- **Cmd/Ctrl+Click:** Toggle selection on/off
- **Shift+Click:** Select range from last selection to clicked object
- **Cmd/Ctrl+A:** Select all objects in current view
- **Delete/Backspace:** Remove selected objects (with confirmation)

**Sorting:**
- Sort by name, type, size, date modified
- Sort ascending or descending
- Preference saved for each view

### 3.6 Detail Panel

Right-side panel showing object information:

**Core Info:**
- Object name (editable)
- Source URI (clickable to open)
- Source type (file icon, URL globe, etc.)

**Metadata Section:**
- File: Size, type, path, modified date
- URL: Title, description, favicon, domain

**User Annotations:**
- Tags (add/remove via autocomplete)
- Notes (free-form text field)

**Actions:**
- "Open" button - Opens source in native application or browser
- "Copy Path/URL" - Copy source to clipboard
- "Delete" button - Remove object from Index

**Related Objects:**
- Shows linked objects with relationship types
- Click to navigate to related object

### 3.7 Native OS Integration

**File Selection Dialogs:**
- Native OS file picker (macOS, Windows, Linux)
- Multi-select support
- Folder selection with recursive import

**File Watching:**
- When files in indexed folders are modified, Index detects changes
- Updates metadata (size, modified date)
- Notifies user of external modifications

**Opening Objects:**
- Files: Open with system default application
- URLs: Open in system default browser
- Context menu support

**Keyboard Shortcuts:**
| Action | Keys |
|--------|------|
| Select all | Cmd/Ctrl+A |
| Delete selected | Delete or Backspace |
| Toggle select | Cmd/Ctrl+Click |
| Range select | Shift+Click |
| Reload (dev) | Cmd/Ctrl+R |

---

## 4. User Workflows

### 4.1 Getting Started

1. Launch Index
2. Click "Add Files" to index personal documents folder
3. Scan/import occurs automatically
4. Objects appear in "All Objects" view
5. Click an object to see details
6. Add tags to start organizing

### 4.2 Building a Collection

1. Go to "Collections" page
2. Click "New Collection"
3. Name it (e.g., "2026 Planning")
4. Select tags that objects must have
5. Optionally select tags for OR queries
6. Choose a color
7. Save - collection is live and auto-updates
8. Pin to sidebar for quick access

### 4.3 Exploring with Graph

1. Go to "Graph" view
2. See all objects as nodes, connections as lines
3. Drag nodes to rearrange
4. Zoom with mouse wheel
5. Pan by holding space+drag
6. Click object to view details
7. Colors indicate object types

### 4.4 Managing Collections Over Time

1. Add new items as they arrive
2. Tag them to automatically appear in relevant collections
3. Collections show current state (no maintenance needed)
4. Rename tags to reorganize entire collections
5. Create new collections for new projects
6. Archive by creating "completed" tag, excluding it from active collections

### 4.5 URL Management

1. Paste URL or click "Add URL"
2. Index fetches page title and description
3. Objects show website favicon and domain
4. Click "Open" to view in browser
5. Add tags like any other object
6. Can be in collections alongside files

---

## 5. Visual Design Principles

**Visual Hierarchy:**
- Large thumbnails/icons for objects (when available)
- Clear labeling of source type (file/URL)
- Tag badges with distinct colors
- High contrast selection indicators

**Information Density:**
- Compact list view for browsing many objects
- Detail panel for deep exploration
- Progressive disclosure (click to expand)

**Interaction Feedback:**
- Immediate response to selections
- Visual confirmation of actions
- Error messages when operations fail

**Accessibility:**
- Keyboard-only navigation supported
- Sufficient color contrast for readability
- Clear focus indicators
- Screen reader support

---

## 6. Data Privacy and Security

**Local-First Architecture:**
- All data stored on user's computer
- No cloud synchronization
- No third-party tracking
- Data never leaves the device

**File Access:**
- Index only reads indexed files
- Does not modify or copy files
- Respects OS file permissions
- User grants access via native OS dialogs

**Security Measures:**
- Electron context isolation enabled
- No node.js in renderer process
- Preload script limits API surface
- Input validation on all user data

---

## 7. Success Metrics

**v0.3 Feature Completion:**
- ✓ Can import and organize file:// sources
- ✓ Can import and organize https:// sources
- ✓ Tagging with global rename capability
- ✓ Collections with AND/OR/NOT logic
- ✓ Graph visualization of relationships
- ✓ All features work in full-featured state

**User Experience Goals:**
- Objects import and appear in <2 seconds
- Tagging workflow requires <3 clicks
- Collections update automatically on save
- Graph handles 1000+ objects smoothly

---

*Product specification for v0.3*
*Covers features, workflows, and user experience*
*Referenced from v0.2 final-spec and v0.3 pre-spec*
*January 2026*
